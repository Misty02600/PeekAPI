# Product Context - PeekAPI

## 项目存在的原因

PeekAPI 诞生于对远程获取电脑屏幕和音频信息的需求。在聊天机器人、远程监控等场景中，经常需要获取当前电脑的屏幕截图或系统音频，而现有方案要么功能复杂，要么不够安全。

## 解决的问题

1. **远程屏幕获取** - 无需复杂的远程桌面软件，通过简单的 HTTP API 即可获取屏幕截图
2. **隐私保护** - 一键切换公开/私密模式，避免敏感信息泄露
3. **音频监控** - 持续录制系统音频，支持获取最近录音
4. **API 安全** - 通过 API 密钥保护敏感操作

## 系统工作方式

### 启动流程
1. 读取配置文件 `config.toml`
2. 启动音频录制线程（环形缓冲区）
3. 启动 FastAPI HTTP 服务器（Uvicorn）
4. 启动系统托盘图标

### 核心功能
- **GET /screen** - 获取屏幕截图，参数 `r` 控制模糊度，`k` 为 API 密钥
- **GET /record** - 获取最近录制的音频
- **GET /check** - 服务健康检查

### 模式切换
- **公开模式** - 正常响应所有请求
- **私密模式** - 拒绝所有截图和录音请求，返回 403

## 用户体验目标

1. **简单部署** - 下载 exe + 配置文件即可运行
2. **一键操作** - 通过系统托盘快速切换模式
3. **透明运行** - 后台静默运行，不干扰正常使用
4. **即时响应** - API 请求快速返回
5. **可靠稳定** - 音频录制支持设备断开重连

## 用户故事

1. 作为机器人开发者，我希望通过 API 获取屏幕截图，以便在群聊中分享当前屏幕内容
2. 作为用户，我希望在需要隐私时快速切换到私密模式，避免敏感信息泄露
3. 作为用户，我希望程序在后台静默运行，不影响正常工作
4. 作为开发者，我希望有健康检查接口，以便监控服务状态
